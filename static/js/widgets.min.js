(function(){this.storybase=this.storybase||{};var p=this.storybase.widgets=this.storybase.widgets||{};if(p.showWidgets)p.showWidgets();else{var q=(this._sbBaseUrl||"http://floodlightproject.org")+"/widget/",k=function(m,l,g){k=document.getElementsByClassName?function(a,b,c){c=c||document;a=c.getElementsByClassName(a);b=b?RegExp("\\b"+b+"\\b","i"):null;c=[];for(var e,d=0,f=a.length;d<f;d+=1)e=a[d],b&&!b.test(e.nodeName)||c.push(e);return c}:document.evaluate?function(a,b,c){b=b||"*";c=c||document;
var e=a.split(" "),d="",f="http://www.w3.org/1999/xhtml"===document.documentElement.namespaceURI?"http://www.w3.org/1999/xhtml":null;a=[];for(var g,h=0,k=e.length;h<k;h+=1)d+="[contains(concat(' ', @class, ' '), ' "+e[h]+" ')]";try{g=document.evaluate(".//"+b+d,c,f,0,null)}catch(l){g=document.evaluate(".//"+b+d,c,null,0,null)}for(;b=g.iterateNext();)a.push(b);return a}:function(a,b,c){b=b||"*";c=c||document;var e=a.split(" ");a=[];b="*"===b&&c.all?c.all:c.getElementsByTagName(b);c=[];var d;d=0;for(var f=
e.length;d<f;d+=1)a.push(RegExp("(^|\\s)"+e[d]+"(\\s|$)"));for(var f=0,g=b.length;f<g;f+=1){e=b[f];d=!1;for(var h=0,k=a.length;h<k&&(d=a[h].test(e.className),d);h+=1);d&&c.push(e)}return c};return k(m,l,g)};(p.showWidgets=function(){var m=k("storybase-story-embed").concat(k("storybase-list-embed")).concat(k("storybase-story-list-embed")),l,g,a,b,c;for(l=0;l<m.length;l++)if(c={},g=m[l],"none"!=g.style.display){c.height=g.getAttribute("data-height")||"500px";c.version=g.getAttribute("data-version")||
null;a=g;b=c;var e=a.getAttribute("href"),d=[],f=q,n=void 0,h=void 0;e||(n=k("storybase-story",null,a)[0].getAttribute("href"),h=k("storybase-list",null,a)[0].getAttribute("href"));e&&(e="/"===e[e.length-1]?e:e+"/",-1<(" "+a.className+" ").indexOf(" storybase-story-embed ")?n=e:-1<(" "+a.className+" ").indexOf(" storybase-list-embed ")&&(h=e));n&&d.push("story-url="+encodeURIComponent(n));h&&d.push("list-url="+encodeURIComponent(h));f=b.version?f+b.version+"/":f;d.length&&(f=f+"?"+d.join("&"));if(b=
f)a=document.createElement("iframe"),a.setAttribute("name","storybase-story-widget-frame"),a.setAttribute("src",b),a.setAttribute("style","border: none; height: "+c.height+";"),g.parentNode.insertBefore(a,g),g.style.display="none"}})()}}).call(this);

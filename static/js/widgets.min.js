(function(){var p=this;p.storybase=p.storybase||{};var q=p.storybase.widgets=p.storybase.widgets||{};if(q.showWidgets)q.showWidgets();else{var s=function(b){return"undefined"===typeof String.prototype.trim?str.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b.trim()},m=function(b,l,n){m=document.getElementsByClassName?function(e,a,c){c=c||document;e=c.getElementsByClassName(e);a=a?RegExp("\\b"+a+"\\b","i"):null;c=[];for(var h,d=0,f=e.length;d<f;d+=1)h=e[d],a&&!a.test(h.nodeName)||c.push(h);return c}:document.evaluate?
function(e,a,c){a=a||"*";c=c||document;var h=e.split(" "),d="",f="http://www.w3.org/1999/xhtml"===document.documentElement.namespaceURI?"http://www.w3.org/1999/xhtml":null;e=[];for(var b,g=0,k=h.length;g<k;g+=1)d+="[contains(concat(' ', @class, ' '), ' "+h[g]+" ')]";try{b=document.evaluate(".//"+a+d,c,f,0,null)}catch(l){b=document.evaluate(".//"+a+d,c,null,0,null)}for(;a=b.iterateNext();)e.push(a);return e}:function(e,a,c){a=a||"*";c=c||document;var b=e.split(" ");e=[];a="*"===a&&c.all?c.all:c.getElementsByTagName(a);
c=[];var d;d=0;for(var f=b.length;d<f;d+=1)e.push(RegExp("(^|\\s)"+b[d]+"(\\s|$)"));for(var f=0,l=a.length;f<l;f+=1){b=a[f];d=!1;for(var g=0,k=e.length;g<k&&(d=e[g].test(b.className),d);g+=1);d&&c.push(b)}return c};return m(b,l,n)};(q.showWidgets=function(b){if(!b){b=document.getElementsByTagName("script");b=b[b.length-1].src;var l=document.createElement("a");l.href=b;b="//"+l.host;b=p._sbBaseUrl||b||"https://floodlightproject.org"}b+="/widget/";var l=m("storybase-story-embed").concat(m("storybase-list-embed")).concat(m("storybase-story-list-embed")),
n,e,a,c,h;for(n=0;n<l.length;n++)if(h={},e=l[n],"none"!=e.style.display){h.height=e.getAttribute("data-height")||"500px";h.version=e.getAttribute("data-version")||null;a=e;var d=b;c=h;var f=a.getAttribute("href"),r=[],g=void 0,k=void 0;try{f||(g=(g=m("storybase-story",null,a)[0].getAttribute("href"))?s(g):g,k=(k=m("storybase-list",null,a)[0].getAttribute("href"))?s(k):k),f&&(f=f?s(f):f,f="/"===f[f.length-1]?f:f+"/",-1<(" "+a.className+" ").indexOf(" storybase-story-embed ")?g=f:-1<(" "+a.className+
" ").indexOf(" storybase-list-embed ")&&(k=f)),g&&r.push("story-url="+encodeURIComponent(g)),k&&r.push("list-url="+encodeURIComponent(k)),d=c.version?d+c.version+"/":d,r.length&&(d=d+"?"+r.join("&"))}catch(q){}if(c=d)a=document.createElement("iframe"),a.setAttribute("name","storybase-story-widget-frame"),a.setAttribute("src",c),a.setAttribute("style","border: none; height: "+h.height+";"),e.parentNode.insertBefore(a,e),e.style.display="none"}})()}}).call(this);

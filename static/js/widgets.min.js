(function(){var n=this;n.storybase=n.storybase||{};var p=n.storybase.widgets=n.storybase.widgets||{};if(p.showWidgets)p.showWidgets();else{var q=function(d){return"undefined"===typeof String.prototype.trim?d.replace(/^\s\s*/,"").replace(/\s\s*$/,""):d.trim()},l=function(d,k,m){l=document.getElementsByClassName?function(e,b,a){a=a||document;e=a.getElementsByClassName(e);b=b?RegExp("\\b"+b+"\\b","i"):null;a=[];for(var h,c=0,f=e.length;c<f;c+=1)h=e[c],b&&!b.test(h.nodeName)||a.push(h);return a}:document.evaluate?
function(e,b,a){b=b||"*";a=a||document;var h=e.split(" "),c="",f="http://www.w3.org/1999/xhtml"===document.documentElement.namespaceURI?"http://www.w3.org/1999/xhtml":null;e=[];for(var d,g=0,k=h.length;g<k;g+=1)c+="[contains(concat(' ', @class, ' '), ' "+h[g]+" ')]";try{d=document.evaluate(".//"+b+c,a,f,0,null)}catch(l){d=document.evaluate(".//"+b+c,a,null,0,null)}for(;b=d.iterateNext();)e.push(b);return e}:function(e,b,a){b=b||"*";a=a||document;var d=e.split(" ");e=[];b="*"===b&&a.all?a.all:a.getElementsByTagName(b);
a=[];var c;c=0;for(var f=d.length;c<f;c+=1)e.push(RegExp("(^|\\s)"+d[c]+"(\\s|$)"));for(var f=0,k=b.length;f<k;f+=1){d=b[f];c=!1;for(var g=0,l=e.length;g<l&&(c=e[g].test(d.className),c);g+=1);c&&a.push(d)}return a};return l(d,k,m)};(p.showWidgets=function(d){if(!d){d=document.getElementsByTagName("script");d=d[d.length-1].src;var k=document.createElement("a");k.href=d;d="//"+k.host;d=n._sbBaseUrl||d||"https://floodlightproject.org"}d+="/widget/";var k=l("storybase-story-embed").concat(l("storybase-list-embed")).concat(l("storybase-story-list-embed")),
m,e,b,a,h;for(m=0;m<k.length;m++)if(h={},e=k[m],"none"!=e.style.display){b=e;a=b.getAttribute("href");var c=void 0,f=void 0;try{a||(c=(c=l("storybase-story",null,b)[0].getAttribute("href"))?q(c):c,f=(f=l("storybase-list",null,b)[0].getAttribute("href"))?q(f):f),a&&(a=a?q(a):a,a="/"===a[a.length-1]?a:a+"/",-1<(" "+b.className+" ").indexOf(" storybase-story-embed ")?c=a:-1<(" "+b.className+" ").indexOf(" storybase-list-embed ")&&(f=a))}catch(p){}a=[c,f];if(a[0]||a[1]){h.version=e.getAttribute("data-version")||
null;h.height=e.getAttribute("data-height")||(a[1]?"500px":"240px");h.width=e.getAttribute("data-width")||"600px";b=a[0];a=a[1];var c=h,f=[],g=d;b&&f.push("story-url="+encodeURIComponent(b));a&&f.push("list-url="+encodeURIComponent(a));g=c.version?g+c.version+"/":g;f.length&&(g=g+"?"+f.join("&"));a=g;b=document.createElement("iframe");b.setAttribute("name","storybase-story-widget-frame");b.setAttribute("src",a);b.setAttribute("style","border: none; height: "+h.height+"; width: "+h.width+";");e.parentNode.insertBefore(b,
e);e.style.display="none"}}})()}}).call(this);

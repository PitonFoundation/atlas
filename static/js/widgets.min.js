(function(){var n=this;n.storybase=n.storybase||{};var p=n.storybase.widgets=n.storybase.widgets||{};if(p.showWidgets)p.showWidgets();else{var q=function(e){return"undefined"===typeof String.prototype.trim?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e.trim()},l=function(e,k,m){l=document.getElementsByClassName?function(d,b,a){a=a||document;d=a.getElementsByClassName(d);b=b?RegExp("\\b"+b+"\\b","i"):null;a=[];for(var f,c=0,g=d.length;c<g;c+=1)f=d[c],b&&!b.test(f.nodeName)||a.push(f);return a}:document.evaluate?
function(d,b,a){b=b||"*";a=a||document;var f=d.split(" "),c="",g="http://www.w3.org/1999/xhtml"===document.documentElement.namespaceURI?"http://www.w3.org/1999/xhtml":null;d=[];for(var e,h=0,k=f.length;h<k;h+=1)c+="[contains(concat(' ', @class, ' '), ' "+f[h]+" ')]";try{e=document.evaluate(".//"+b+c,a,g,0,null)}catch(l){e=document.evaluate(".//"+b+c,a,null,0,null)}for(;b=e.iterateNext();)d.push(b);return d}:function(d,b,a){b=b||"*";a=a||document;var f=d.split(" ");d=[];b="*"===b&&a.all?a.all:a.getElementsByTagName(b);
a=[];var c;c=0;for(var g=f.length;c<g;c+=1)d.push(RegExp("(^|\\s)"+f[c]+"(\\s|$)"));for(var g=0,e=b.length;g<e;g+=1){f=b[g];c=!1;for(var h=0,k=d.length;h<k&&(c=d[h].test(f.className),c);h+=1);c&&a.push(f)}return a};return l(e,k,m)};(p.showWidgets=function(e){if(!e){e=document.getElementsByTagName("script");e=e[e.length-1].src;var k=document.createElement("a");k.href=e;e="//"+k.host;e=n._sbBaseUrl||e||"https://floodlightproject.org"}e+="/widget/";var k=l("storybase-story-embed").concat(l("storybase-list-embed")).concat(l("storybase-story-list-embed")),
m,d,b,a,f;for(m=0;m<k.length;m++)if(f={},d=k[m],"none"!=d.style.display){b=d;a=b.getAttribute("href");var c=void 0,g=void 0;try{a||(c=(c=l("storybase-story",null,b)[0].getAttribute("href"))?q(c):c,g=(g=l("storybase-list",null,b)[0].getAttribute("href"))?q(g):g),a&&(a=a?q(a):a,a="/"===a[a.length-1]?a:a+"/",-1<(" "+b.className+" ").indexOf(" storybase-story-embed ")?c=a:-1<(" "+b.className+" ").indexOf(" storybase-list-embed ")&&(g=a))}catch(p){}a=[c,g];if(a[0]||a[1]){f.version=d.getAttribute("data-version")||
null;console.debug(f.version);f.height=d.getAttribute("data-height")||!a[1]&&"0.1"!==f.version?"240px":"500px";f.width=d.getAttribute("data-width")||"600px";b=a[0];a=a[1];var c=f,g=[],h=e;b&&g.push("story-url="+encodeURIComponent(b));a&&g.push("list-url="+encodeURIComponent(a));h=c.version?h+c.version+"/":h;g.length&&(h=h+"?"+g.join("&"));a=h;b=document.createElement("iframe");b.setAttribute("name","storybase-story-widget-frame");b.setAttribute("src",a);b.setAttribute("style","border: none; height: "+
f.height+"; width: "+f.width+";");d.parentNode.insertBefore(b,d);d.style.display="none"}}})()}}).call(this);
